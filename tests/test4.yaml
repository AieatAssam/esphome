# Test azure iot hub REST component
esphome:
  name: test4
  platform: ESP32
  board: nodemcu-32s
  build_path: build/test4

wifi:
  networks:
  - ssid: 'MySSID'
    password: 'password1'
  - ssid: 'MySSID2'
    password: ''
    channel: 14
    bssid: 'A1:63:95:47:D3:1D'

# ensure at least one sensor
sensor:
  - platform: esp32_hall
    name: ESP32 Hall Sensor

# ensure at least one binary sensor
binary_sensor:
  - platform: gpio
    pin: GPIO9
    name: "Pin 9"

# ensure at least one light
light:
  - platform: binary
    name: "Desk Lamp"
    output: gpio_26

# ensure at least one climate
climate:
  - platform: tcl112
    name: TCL112 Climate With Sensor
    supports_heat: True
    supports_cool: True
    sensor: my_sensor
  - platform: tcl112

# ensure at least one switch
switch:
  - platform: gpio
    pin: GPIO25
    name: "Living Room Dehumidifier"
    icon: "mdi:restart"
    inverted: True
    command_topic: custom_command_topic
    restore_mode: ALWAYS_OFF

# ensure at least one fan
fan:
  - platform: binary
    output: gpio_26
    name: "Living Room Fan 1"

# ensure at least one cover
cover:
  - platform: template
    name: "Template Cover"
    id: template_cover
    lambda: |-
      if (id(binary_sensor1).state) {
        return COVER_OPEN;
      } else {
        return {};
      }
    optimistic: true
    open_action:
      - cover.template.publish:
          id: template_cover
          state: CLOSED
    assumed_state: no


# ensure at least one text sensor
text_sensor:
- platform: wifi_info
  ip_address:
    name: "IP Address"
  ssid:
    name: "SSID"
  bssid:
    name: "BSSID"

azure_iot_hub:
  hub_name: esphome-fake-hub
  device_id: test04
  device_key: ZXNwaG9tZS1kZXZpY2U=
  api_version: 2018-06-30
  token_expiration_seconds: 3600
